# yaml-language-server: $schema=../vai.schema.json

remote-echo:
  - uses: github.com/noxsios/vai@main?task=simple#tasks/echo.yaml
    with:
      message: remote-test

world:
  - cmd: |
      echo "$message"
    with:
      message: ${{ input | default "fallback" | persist }}
  - cmd: echo "$message has been persisted"
  - cmd: |
      echo "$message can still be set on a per-cmd basis"
      echo "another-key=$message" >> $VAI_OUTPUT
    id: echo-manual
    with:
      message: manual
  - cmd: echo "$message can be grabbed from the previous cmd"
    with:
      message: ${{ from "echo-manual" "another-key" }}

same:
  - uses: world
    with:
      message: same

default:
  - cmd: echo "default"

echo:
  - uses: tasks/echo.yaml?task=simple
    with:
      message: ${{ input | default "Hello World!" }}

echo-matrix:
  - uses: ../tasks/echo.yaml?task=simple
    matrix:
      message: ["Hello, World!", "General Kenobi!"]

hello-world:
  - cmd: echo "Hello, World!"
